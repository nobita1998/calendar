<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Binance Booster - Pieverse è§£é”</title>
  <link rel="icon" type="image/png" sizes="1024x1024" href="icon.png">
  <link rel="apple-touch-icon" href="icon.png">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Arial', sans-serif;
      background: linear-gradient(135deg, #0c0c0f 0%, #1a1a23 100%);
      color: #ffffff;
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      background: rgba(23, 23, 31, 0.8);
      border-radius: 16px;
      border: 1px solid #2b2b40;
      backdrop-filter: blur(10px);
      padding: 30px;
      box-shadow: 0 20px 60px rgba(240, 185, 11, 0.1);
    }

    .header { display: flex; align-items: center; gap: 12px; margin-bottom: 20px; }

    .title {
      font-size: 1.65em;
      font-weight: bold;
      background: linear-gradient(45deg, #f0b90b, #fcd535);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 10px;
    }

    .subtitle { color: #848e9c; font-size: 1em; margin-bottom: 20px; }

    /* Info banner */
    .info-banner {
      background: linear-gradient(135deg, rgba(14, 203, 129, 0.1) 0%, rgba(23, 23, 31, 0.9) 100%);
      border: 1px solid rgba(14, 203, 129, 0.3);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 25px;
      position: relative;
      overflow: hidden;
    }

    .info-banner::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, #0ecb81, #1dd1a1);
    }

    .info-banner-title {
      font-size: 1.15em;
      font-weight: 700;
      color: #0ecb81;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .info-banner-text {
      color: #cbd5e1;
      font-size: 0.95em;
      line-height: 1.6;
    }

    .info-banner-text strong {
      color: #f0b90b;
    }

    /* Accordion layout for phases */
    .phases-container { display: flex; flex-direction: column; gap: 20px; margin-bottom: 20px; }

    .phase-accordion {
      background: rgba(23, 23, 31, 0.6);
      border: 1px solid #2b2b40;
      border-radius: 12px;
      overflow: hidden;
    }

    .phase-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 20px 25px;
      background: linear-gradient(135deg, rgba(240, 185, 11, 0.15) 0%, rgba(23, 23, 31, 0.8) 100%);
      border-bottom: 2px solid transparent;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .phase-header:hover {
      background: linear-gradient(135deg, rgba(240, 185, 11, 0.25) 0%, rgba(23, 23, 31, 0.9) 100%);
    }

    .phase-header.active {
      border-bottom-color: #f0b90b;
    }

    .phase-header-left {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .phase-toggle {
      font-size: 1.2em;
      color: #f0b90b;
      transition: transform 0.3s ease;
    }

    .phase-toggle.expanded {
      transform: rotate(90deg);
    }

    .phase-title {
      font-size: 1.3em;
      font-weight: 700;
      color: #f0b90b;
      letter-spacing: 0.5px;
    }

    .phase-info {
      font-size: 0.95em;
      color: #848e9c;
      margin-left: 15px;
    }

    .phase-total {
      font-size: 1.1em;
      font-weight: 600;
      color: #26a69a;
    }

    .phase-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.4s ease;
    }

    .phase-content.expanded {
      max-height: 2000px;
    }

    .phase-tasks-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 15px;
      padding: 25px;
    }

    .task-card {
      background: linear-gradient(135deg, rgba(240, 185, 11, 0.1) 0%, rgba(23, 23, 31, 0.9) 100%);
      border: 1px solid #2b2b40;
      border-radius: 12px;
      padding: 15px;
      position: relative;
      overflow: hidden;
    }

    .task-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px; background: linear-gradient(90deg, #f0b90b, #fcd535); }

    .task-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
    .task-title { font-size: 0.95em; font-weight: 600; color: #ffffff; }

    .progress-bar { width: 100%; height: 8px; background: #2b2b40; border-radius: 4px; margin-bottom: 10px; overflow: hidden; position: relative; }
    .progress-fill { height: 100%; background: linear-gradient(90deg, #f0b90b, #fcd535); border-radius: 4px; position: relative; width: 100%; }

    .task-footer { display: flex; justify-content: space-between; align-items: center; }
    .task-reward { font-size: 0.95em; color: #26a69a; font-weight: 600; }

    .summary-card {
      background: linear-gradient(135deg, rgba(240, 185, 11, 0.2) 0%, rgba(23, 23, 31, 0.9) 100%);
      border: 2px solid #f0b90b;
      border-radius: 8px;
      padding: 15px;
      text-align: center;
      margin-bottom: 20px;
      position: relative;
    }
    .summary-title { font-size: 1.1em; color: #f0b90b; margin-bottom: 8px; font-weight: 600; }
    .minimum-coins { font-size: 1.8em; font-weight: bold; color: #ffffff; text-shadow: 0 0 20px rgba(240, 185, 11, 0.8); margin-bottom: 12px; }
    .author-info {
      position: absolute;
      top: 12px;
      right: 12px;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 4px;
      font-size: 0.75em;
    }
    .author-label {
      display: none;
    }
    .social-accounts {
      display: flex;
      flex-direction: column;
      gap: 4px;
      align-items: flex-end;
    }
    .social-item {
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .social-platform {
      color: #848e9c;
    }
    .social-handle {
      color: #f0b90b;
      font-weight: 600;
    }
    .coin-symbol { color: #f0b90b; margin-left: 10px; }

    .watermark { text-align: right; color: #848e9c; font-size: 1em; opacity: 0.8; margin-top: 20px; padding-right: 10px; }

    .lottery-section {
      background: linear-gradient(135deg, rgba(38, 166, 154, 0.1) 0%, rgba(23, 23, 31, 0.9) 100%);
      border: 1px solid #2b2b40;
      border-radius: 12px;
      padding: 25px;
    }

    .lottery-title {
      font-size: 1.6em;
      color: #26a69a;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .lottery-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
    }

    .lottery-phase-group {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .lottery-item {
      background: rgba(38, 166, 154, 0.1);
      border: 1px solid rgba(38, 166, 154, 0.3);
      border-radius: 8px;
      padding: 20px;
      text-align: center;
    }

    .lottery-emoji {
      font-size: 2em;
      margin-bottom: 10px;
    }

    .lottery-phase-title {
      font-weight: 600;
      margin-bottom: 10px;
      color: #ffffff;
    }

    .lottery-rate {
      color: #26a69a;
      font-weight: 600;
      margin-bottom: 5px;
      font-size: 0.9em;
    }

    .lottery-reward {
      color: #f0b90b;
      font-size: 1.1em;
      font-weight: 600;
    }

    .lottery-usdt {
      color: #848e9c;
      font-size: 0.85em;
      margin-top: 8px;
      font-style: italic;
    }

    /* Back link */
    .back-link {
      display: inline-block;
      background: linear-gradient(135deg, #0ecb81 0%, #1dd1a1 100%);
      color: #000;
      font-weight: 700;
      padding: 8px 12px;
      border-radius: 8px;
      text-decoration: none;
      box-shadow: 0 2px 8px rgba(14,203,129,.3);
    }
    .back-link:hover { transform: translateY(-1px); box-shadow: 0 4px 16px rgba(14,203,129,.5); }

    @media (max-width: 1024px) {
      .phase-tasks-grid { grid-template-columns: repeat(2, 1fr); }
      .lottery-grid { grid-template-columns: repeat(2, 1fr); }
      .lottery-phase-group { gap: 12px; }
    }
    @media (max-width: 768px) {
      body { padding: 10px; }
      .container { max-width: 100%; margin: 0; border-radius: 16px; padding: 20px; }
      .header { margin-bottom: 20px; }
      .title { font-size: 1.35em; }
      .subtitle { font-size: 0.95em; }
      .phase-tasks-grid { grid-template-columns: 1fr; gap: 12px; }
      .phase-header { padding: 15px 20px; flex-direction: column; align-items: flex-start; gap: 10px; }
      .phase-header-left { flex-direction: column; align-items: flex-start; gap: 8px; }
      .phase-title { font-size: 1.1em; }
      .phase-info { margin-left: 0; }
      .phase-total { font-size: 1em; }
      .phase-tasks-grid { padding: 15px; }
      .task-card { padding: 12px; border-radius: 10px; }
      .task-title { font-size: 0.95em; }
      .progress-bar { height: 6px; }
      .summary-card { padding: 12px; padding-top: 40px; }
      .author-info { top: 8px; right: 8px; font-size: 0.7em; }
      .lottery-section { padding: 16px; border-radius: 10px; }
      .lottery-grid { grid-template-columns: 1fr; gap: 12px; }
      .lottery-title { font-size: 1.3em; }
      .lottery-item { padding: 16px; }
      .back-link { padding: 6px 10px; font-size: 14px; }
      .summary-title { font-size: 1em; }
      .minimum-coins { font-size: 1.5em; }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <a href="index.html" class="back-link" aria-label="è¿”å›" onclick="if (document.referrer && new URL(document.referrer).origin === location.origin) { history.back(); return false; }">è¿”å›æ—¥å†</a>
      <h1 class="title">Binance Booster - Pieverse è§£é”</h1>
    </div>

    <div class="phases-container" aria-label="è¿›åº¦ä»»åŠ¡">
      <!-- Phase 1 -->
      <div class="phase-accordion">
        <div class="phase-header active" data-phase="1">
          <div class="phase-header-left">
            <span class="phase-toggle expanded">â–¶</span>
            <span class="phase-title">Phase 1</span>
          </div>
          <div class="phase-total">30.62 å¸</div>
        </div>
        <div class="phase-content expanded">
          <div class="phase-tasks-grid">
            <div class="task-card">
              <div class="task-header"><span class="task-title">ä»»åŠ¡ 1</span></div>
              <div class="progress-bar"><div class="progress-fill"></div></div>
              <div class="task-footer"><div class="task-reward">æ¯æœˆ: 1.25 å¸</div></div>
            </div>
            <div class="task-card">
              <div class="task-header"><span class="task-title">ä»»åŠ¡ 2</span></div>
              <div class="progress-bar"><div class="progress-fill"></div></div>
              <div class="task-footer"><div class="task-reward">æ¯æœˆ: 2.5 å¸</div></div>
            </div>
            <div class="task-card">
              <div class="task-header"><span class="task-title">ä»»åŠ¡ 3</span></div>
              <div class="progress-bar"><div class="progress-fill"></div></div>
              <div class="task-footer"><div class="task-reward">æ¯æœˆ: 0.875 å¸</div></div>
            </div>
            <div class="task-card">
              <div class="task-header"><span class="task-title">ä»»åŠ¡ 4</span></div>
              <div class="progress-bar"><div class="progress-fill"></div></div>
              <div class="task-footer"><div class="task-reward">æ¯æœˆ: 1.886 å¸</div></div>
            </div>
            <div class="task-card">
              <div class="task-header"><span class="task-title">ä»»åŠ¡ 5</span></div>
              <div class="progress-bar"><div class="progress-fill"></div></div>
              <div class="task-footer"><div class="task-reward">æ¯æœˆ: 4.167 å¸</div></div>
            </div>
            <div class="task-card">
              <div class="task-header"><span class="task-title">ä»»åŠ¡ 6</span></div>
              <div class="progress-bar"><div class="progress-fill"></div></div>
              <div class="task-footer"><div class="task-reward">æ¯æœˆ: 6.25 å¸</div></div>
            </div>
            <div class="task-card">
              <div class="task-header"><span class="task-title">ä»»åŠ¡ 7</span></div>
              <div class="progress-bar"><div class="progress-fill"></div></div>
              <div class="task-footer"><div class="task-reward">æ¯æœˆ: 8.333 å¸</div></div>
            </div>
            <div class="task-card">
              <div class="task-header"><span class="task-title">ä»»åŠ¡ 8</span></div>
              <div class="progress-bar"><div class="progress-fill"></div></div>
              <div class="task-footer"><div class="task-reward">æ¯æœˆ: 6.25 å¸</div></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Phase 2 -->
      <div class="phase-accordion">
        <div class="phase-header" data-phase="2">
          <div class="phase-header-left">
            <span class="phase-toggle">â–¶</span>
            <span class="phase-title">Phase 2</span>
          </div>
          <div class="phase-total">17.02 å¸</div>
        </div>
        <div class="phase-content">
          <div class="phase-tasks-grid">
            <div class="task-card">
              <div class="task-header"><span class="task-title">ä»»åŠ¡ 1</span></div>
              <div class="progress-bar"><div class="progress-fill"></div></div>
              <div class="task-footer"><div class="task-reward">æ¯æœˆ: 4 å¸</div></div>
            </div>
            <div class="task-card">
              <div class="task-header"><span class="task-title">ä»»åŠ¡ 2</span></div>
              <div class="progress-bar"><div class="progress-fill"></div></div>
              <div class="task-footer"><div class="task-reward">æ¯æœˆ: 2.604 å¸</div></div>
            </div>
            <div class="task-card">
              <div class="task-header"><span class="task-title">ä»»åŠ¡ 3</span></div>
              <div class="progress-bar"><div class="progress-fill"></div></div>
              <div class="task-footer"><div class="task-reward">æ¯æœˆ: 6.667 å¸</div></div>
            </div>
            <div class="task-card">
              <div class="task-header"><span class="task-title">ä»»åŠ¡ 4</span></div>
              <div class="progress-bar"><div class="progress-fill"></div></div>
              <div class="task-footer"><div class="task-reward">æ¯æœˆ: 5.117 å¸</div></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Phase 3 -->
      <div class="phase-accordion">
        <div class="phase-header" data-phase="3">
          <div class="phase-header-left">
            <span class="phase-toggle">â–¶</span>
            <span class="phase-title">Phase 3</span>
          </div>
          <div class="phase-total">13.02 å¸</div>
        </div>
        <div class="phase-content">
          <div class="phase-tasks-grid">
            <div class="task-card">
              <div class="task-header"><span class="task-title">ä»»åŠ¡ 1</span></div>
              <div class="progress-bar"><div class="progress-fill"></div></div>
              <div class="task-footer"><div class="task-reward">æ¯æœˆ: 3.542 å¸</div></div>
            </div>
            <div class="task-card">
              <div class="task-header"><span class="task-title">ä»»åŠ¡ 2</span></div>
              <div class="progress-bar"><div class="progress-fill"></div></div>
              <div class="task-footer"><div class="task-reward">æ¯æœˆ: 2.396 å¸</div></div>
            </div>
            <div class="task-card">
              <div class="task-header"><span class="task-title">ä»»åŠ¡ 3</span></div>
              <div class="progress-bar"><div class="progress-fill"></div></div>
              <div class="task-footer"><div class="task-reward">æ¯æœˆ: 3.542 å¸</div></div>
            </div>
            <div class="task-card">
              <div class="task-header"><span class="task-title">ä»»åŠ¡ 4</span></div>
              <div class="progress-bar"><div class="progress-fill"></div></div>
              <div class="task-footer"><div class="task-reward">æ¯æœˆ: 3.542 å¸</div></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Phase 4 -->
      <div class="phase-accordion">
        <div class="phase-header" data-phase="4">
          <div class="phase-header-left">
            <span class="phase-toggle">â–¶</span>
            <span class="phase-title">Phase 4</span>
          </div>
          <div class="phase-total">13.02 å¸</div>
        </div>
        <div class="phase-content">
          <div class="phase-tasks-grid">
            <div class="task-card">
              <div class="task-header"><span class="task-title">ä»»åŠ¡ 1</span></div>
              <div class="progress-bar"><div class="progress-fill"></div></div>
              <div class="task-footer"><div class="task-reward">æ¯æœˆ: 3.542 å¸</div></div>
            </div>
            <div class="task-card">
              <div class="task-header"><span class="task-title">ä»»åŠ¡ 2</span></div>
              <div class="progress-bar"><div class="progress-fill"></div></div>
              <div class="task-footer"><div class="task-reward">æ¯æœˆ: 2.396 å¸</div></div>
            </div>
            <div class="task-card">
              <div class="task-header"><span class="task-title">ä»»åŠ¡ 3</span></div>
              <div class="progress-bar"><div class="progress-fill"></div></div>
              <div class="task-footer"><div class="task-reward">æ¯æœˆ: 3.542 å¸</div></div>
            </div>
            <div class="task-card">
              <div class="task-header"><span class="task-title">ä»»åŠ¡ 4</span></div>
              <div class="progress-bar"><div class="progress-fill"></div></div>
              <div class="task-footer"><div class="task-reward">æ¯æœˆ: 3.542 å¸</div></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="summary-card" aria-live="polite">
      <div class="summary-title">æ€»è®¡ï¼ˆSummaryï¼‰</div>
      <div class="minimum-coins">73.68<span class="coin-symbol">ğŸª™</span></div>
      <div class="author-info">
        <span class="author-label">ä½œè€…ï¼š</span>
        <div class="social-accounts">
          <div class="social-item">
            <span class="social-platform">æ¨ç‰¹:</span>
            <span class="social-handle">@NNNNNNOBITA</span>
          </div>
          <div class="social-item">
            <span class="social-platform">å¸å®‰å¹¿åœº:</span>
            <span class="social-handle">@NNNNNNobita</span>
          </div>
        </div>
      </div>
    </div>

    <div class="lottery-section">
      <div class="lottery-title">ğŸ° æŠ½å¥–ä»»åŠ¡</div>
      <div class="lottery-grid">
        <div class="lottery-phase-group">
          <div class="lottery-item" aria-label="Phase 1 æŠ½å¥–">
            <div class="lottery-emoji">ğŸ²</div>
            <div class="lottery-phase-title">Phase 1 æŠ½å¥–</div>
            <div class="lottery-rate">ä¸­å¥–ç‡: 20% | 10,000äººä¸­å¥–</div>
            <div class="lottery-reward">12.5 å¸</div>
          </div>
        </div>
        <div class="lottery-phase-group">
          <div class="lottery-item" aria-label="Phase 2 æŠ½å¥– 1">
            <div class="lottery-emoji">ğŸ¯</div>
            <div class="lottery-phase-title">Phase 2 æŠ½å¥– 1</div>
            <div class="lottery-rate">ä¸­å¥–ç‡: 12.5% | 10,000äººä¸­å¥–</div>
            <div class="lottery-reward">12.5 å¸</div>
          </div>
          <div class="lottery-item" aria-label="Phase 2 æŠ½å¥– 2">
            <div class="lottery-emoji">ğŸ¯</div>
            <div class="lottery-phase-title">Phase 2 æŠ½å¥– 2</div>
            <div class="lottery-rate">ä¸­å¥–ç‡: 62.5% | 50,000äººä¸­å¥–</div>
            <div class="lottery-reward">1.667 å¸</div>
          </div>
        </div>
        <div class="lottery-phase-group">
          <div class="lottery-item" aria-label="Phase 3 æŠ½å¥– 1">
            <div class="lottery-emoji">ğŸª</div>
            <div class="lottery-phase-title">Phase 3 æŠ½å¥– 1</div>
            <div class="lottery-rate">ä¸­å¥–ç‡: 12.5% | 10,000äººä¸­å¥–</div>
            <div class="lottery-reward">12.5 å¸</div>
          </div>
          <div class="lottery-item" aria-label="Phase 3 æŠ½å¥– 2">
            <div class="lottery-emoji">ğŸª</div>
            <div class="lottery-phase-title">Phase 3 æŠ½å¥– 2</div>
            <div class="lottery-rate">ä¸­å¥–ç‡: 62.5% | 50,000äººä¸­å¥–</div>
            <div class="lottery-reward">1.667 å¸</div>
          </div>
        </div>
        <div class="lottery-phase-group">
          <div class="lottery-item" aria-label="Phase 4 æŠ½å¥– 1">
            <div class="lottery-emoji">ğŸ</div>
            <div class="lottery-phase-title">Phase 4 æŠ½å¥– 1</div>
            <div class="lottery-rate">ä¸­å¥–ç‡: 12.5% | 10,000äººä¸­å¥–</div>
            <div class="lottery-reward">12.5 å¸</div>
          </div>
          <div class="lottery-item" aria-label="Phase 4 æŠ½å¥– 2">
            <div class="lottery-emoji">ğŸ</div>
            <div class="lottery-phase-title">Phase 4 æŠ½å¥– 2</div>
            <div class="lottery-rate">ä¸­å¥–ç‡: 62.5% | 50,000äººä¸­å¥–</div>
            <div class="lottery-reward">1.667 å¸</div>
          </div>
        </div>
      </div>
    </div>

    <div class="watermark">X: @NNNNNNOBITA</div>
  </div>

  <!-- i18n & title wiring -->
  <script>
    (function() {
      const LANG_STORAGE_KEY = 'calendar_lang';
      const currentLang = (function(){ try { return localStorage.getItem(LANG_STORAGE_KEY) || 'zh'; } catch(_){ return 'zh'; } })();
      const dict = {
        zh: {
          back: 'è¿”å›æ—¥å†',
          summary: 'Summary',
          author: 'ä½œè€…ï¼š',
          twitter: 'æ¨ç‰¹:',
          binanceSquare: 'å¸å®‰å¹¿åœº:',
          lottery: 'ğŸ° æŠ½å¥–ä»»åŠ¡',
          title: 'Binance Booster - Pieverse è§£é”',
          perMonth: 'æ¯æœˆ',
          probability: 'ä¸­å¥–ç‡:',
          winners: 'äººä¸­å¥–',
          phase: 'Phase',
          lotteryTask: 'æŠ½å¥–',
          coins: 'å¸'
        },
        en: {
          back: 'Back to Calendar',
          summary: 'Summary',
          author: 'Author:',
          twitter: 'Twitter:',
          binanceSquare: 'Binance Square:',
          lottery: 'ğŸ° Lottery Tasks',
          title: 'Binance Booster - Pieverse Unlock',
          subtitle: 'Monthly Unlock 1/6 Â· 6 Rounds Total',
          infoTitle: 'Unlock Rules',
          infoText: 'Pieverse tokens use a 6-month linear unlock mechanism, unlocking 1/6 of total rewards each month.',
          perMonth: 'Per month',
          probability: 'Win Rate:',
          winners: 'winners',
          phase: 'Phase',
          lotteryTask: 'Lottery',
          coins: 'coins'
        }
      };

      function applyI18n(){
        try { document.documentElement.setAttribute('lang', currentLang === 'zh' ? 'zh-CN' : 'en-US'); } catch(_){ }
        const t = dict[currentLang];

        const h1 = document.querySelector('h1.title');
        if (h1) h1.textContent = t.title;

        try { document.title = t.title; } catch(_){ }

        const back = document.querySelector('.back-link');
        if (back) { back.textContent = t.back; back.setAttribute('aria-label', t.back); }

        const subtitle = document.querySelector('.subtitle');
        if (subtitle) subtitle.textContent = t.subtitle;

        const infoTitle = document.querySelector('.info-banner-title');
        if (infoTitle) infoTitle.textContent = t.infoTitle;

        const infoText = document.querySelector('.info-banner-text');
        if (infoText) infoText.innerHTML = t.infoText;

        const sumTitle = document.querySelector('.summary-title');
        if (sumTitle) sumTitle.textContent = t.summary;

        const authorLabel = document.querySelector('.author-label');
        if (authorLabel) authorLabel.textContent = t.author;

        const platforms = document.querySelectorAll('.social-platform');
        if (platforms.length >= 2) {
          platforms[0].textContent = t.twitter;
          platforms[1].textContent = t.binanceSquare;
        }

        const lotTitle = document.querySelector('.lottery-title');
        if (lotTitle) lotTitle.textContent = t.lottery;

        // Update all "æ¯æœˆ:" text and "å¸" to coins
        document.querySelectorAll('.task-reward').forEach(el => {
          let text = el.textContent;
          // Replace "æ¯æœˆ:" with translated text
          text = text.replace(/æ¯æœˆ:/g, t.perMonth + ':');
          // Replace "å¸" with translated coins
          text = text.replace(/([0-9.]+)\s*å¸/, `$1 ${t.coins}`);
          el.textContent = text;
        });

        // Update all "ä¸­å¥–ç‡:" text
        document.querySelectorAll('.lottery-rate').forEach(el => {
          const text = el.textContent;
          const match = text.match(/ä¸­å¥–ç‡:\s*([0-9.]+)%\s*\|\s*([0-9,]+)äººä¸­å¥–/);
          if (match) {
            const rate = match[1];
            const winners = match[2];
            el.textContent = currentLang === 'en'
              ? `${t.probability} ${rate}% | ${winners} ${t.winners}`
              : `ä¸­å¥–ç‡: ${rate}% | ${winners}äººä¸­å¥–`;
          }
        });

        // Update lottery phase titles
        document.querySelectorAll('.lottery-phase-title').forEach(el => {
          const text = el.textContent;
          const match = text.match(/Phase\s*(\d+)\s*æŠ½å¥–\s*(\d*)/);
          if (match) {
            const phaseNum = match[1];
            const lotteryNum = match[2];
            if (lotteryNum) {
              el.textContent = currentLang === 'en'
                ? `${t.phase} ${phaseNum} ${t.lotteryTask} ${lotteryNum}`
                : `Phase ${phaseNum} æŠ½å¥– ${lotteryNum}`;
            } else {
              el.textContent = currentLang === 'en'
                ? `${t.phase} ${phaseNum} ${t.lotteryTask}`
                : `Phase ${phaseNum} æŠ½å¥–`;
            }
          }
        });

        // Update lottery rewards "å¸" to "coins"
        document.querySelectorAll('.lottery-reward').forEach(el => {
          const text = el.textContent;
          // Match pattern like "12.5 å¸" or "1.667 å¸"
          const match = text.match(/([0-9.]+)\s*å¸/);
          if (match) {
            const amount = match[1];
            // Only update the coin part, keep USDT annotations if they exist
            el.textContent = text.replace(/([0-9.]+)\s*å¸/, `$1 ${t.coins}`);
          }
        });
      }
      applyI18n();
    })();
  </script>

  <!-- Accordion toggle functionality -->
  <script>
    (function(){
      function initAccordion() {
        const headers = document.querySelectorAll('.phase-header');

        headers.forEach(header => {
          header.addEventListener('click', function() {
            const content = this.nextElementSibling;
            const toggle = this.querySelector('.phase-toggle');
            const isExpanded = content.classList.contains('expanded');

            // Toggle current accordion
            if (isExpanded) {
              content.classList.remove('expanded');
              this.classList.remove('active');
              toggle.classList.remove('expanded');
            } else {
              content.classList.add('expanded');
              this.classList.add('active');
              toggle.classList.add('expanded');
            }
          });
        });
      }

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initAccordion);
      } else {
        initAccordion();
      }
    })();
  </script>

  <!-- Auto-calculate phase totals -->
  <script>
    (function(){
      function calculatePhaseTotals(price) {
        const accordions = document.querySelectorAll('.phase-accordion');
        function fmt(n){ try { return (Math.round(n*100)/100).toFixed(2); } catch(_) { return String(n); } }
        function lang(){ try { return localStorage.getItem('calendar_lang') || 'zh'; } catch(_){ return 'zh'; } }

        accordions.forEach(accordion => {
          const tasksGrid = accordion.querySelector('.phase-tasks-grid');
          const totalElement = accordion.querySelector('.phase-total');

          if (!tasksGrid || !totalElement) return;

          const rewards = tasksGrid.querySelectorAll('.task-reward');
          let total = 0;

          rewards.forEach(reward => {
            const match = (reward.textContent || '').match(/([\d.]+)/);
            if (match) {
              total += parseFloat(match[1]);
            }
          });

          // Update total display
          if (total > 0) {
            const currentLang = lang();
            const coinText = currentLang === 'en' ? 'coins' : 'å¸';
            let displayText = total.toFixed(1) + ' ' + coinText;

            // Add USDT price if available
            if (isFinite(price) && price > 0) {
              const usdValue = fmt(total * price);
              displayText += (currentLang === 'en' ? ` ($${usdValue})` : ` (â‰ˆ$${usdValue})`);
            }

            totalElement.textContent = displayText;
          }
        });
      }

      try {
        // Run after rewards are normalized
        setTimeout(() => calculatePhaseTotals(), 100);

        // Update with price when available
        window.updatePhaseTotalsWithPrice = calculatePhaseTotals;
      } catch(e) {}
    })();
  </script>

  <!-- Calculate grand total -->
  <script>
    (function(){
      function calculateGrandTotal() {
        const allRewards = document.querySelectorAll('.task-reward');
        let grandTotal = 0;

        allRewards.forEach(reward => {
          const match = (reward.textContent || '').match(/([\d.]+)/);
          if (match) {
            grandTotal += parseFloat(match[1]);
          }
        });

        const minCoins = document.querySelector('.minimum-coins');
        if (minCoins) {
          const sym = minCoins.querySelector('.coin-symbol');
          const symText = sym ? sym.outerHTML : '<span class="coin-symbol">ğŸª™</span>';
          minCoins.innerHTML = grandTotal.toFixed(2) + symText;
        }
      }

      try {
        setTimeout(() => calculateGrandTotal(), 150);
      } catch(e) {}
    })();
  </script>

  <script>
    (function(){
      function normalizeRewards(){
        var nodes = document.querySelectorAll('.task-reward, .lottery-reward');
        nodes.forEach(function(el){
          var txt = (el.textContent || '').trim();
          var m = txt.match(/^(\s*(?:æ¯æœˆ|Per month)\s*:?\s*)([\d.]+)(\s*(?:Pieverse|æš|coins))?/i);
          if (m) {
            var n = parseFloat(m[2]);
            var suf = (m[3]||'').trim();
            if (!suf) { suf = (/Per month/i.test(m[1]) ? 'coins' : 'æš'); }
            el.textContent = m[1] + n + ' ' + suf;
          }
        });
      }
      try { normalizeRewards(); } catch(e){}
    })();
  </script>

  <script>
  </script>

  <!-- Price annotation: PIEVERSEUSDT -->
  <script>
    (function(){
      const API = 'https://fapi.binance.com/fapi/v1/ticker/price?symbol=PIEVERSEUSDT';
      function fmt(n){ const v = Number(n); return isFinite(v) ? v.toFixed(2) : ''; }
      function lang(){ try { return localStorage.getItem('calendar_lang') || 'zh'; } catch(_){ return 'zh'; } }

      function annotateSummary(price){
        const el = document.querySelector('.minimum-coins');
        if (!el || el.querySelector('.usd-suffix')) return;
        const m = (el.textContent||'').replace(/,/g,'').match(/([\d.]+)/);
        if (!m) return;
        const coins = parseFloat(m[1]);
        if (!isFinite(coins)) return;
        const span = document.createElement('span');
        span.className = 'usd-suffix';
        span.style.fontSize = '0.7em';
        span.style.marginLeft = '8px';
        span.style.color = '#f0b90b';
        span.textContent = (lang()==='en' ? ` ($${fmt(coins*price)} USDT)` : ` â‰ˆ$${fmt(coins*price)} USDT`);
        el.appendChild(span);
      }

      function annotate(price){
        if (!isFinite(price)) return;
        const nodes = document.querySelectorAll('.task-reward, .lottery-reward');
        nodes.forEach(el=>{
          const txt = el.textContent || '';
          if (/USDT/i.test(txt)) return;
          const m = txt.replace(/,/g,'').match(/([\d.]+)\s*(?:å¸|æš|coins)/i);
          if (!m) return;
          const coins = parseFloat(m[1]);
          if (!isFinite(coins)) return;
          const suffix = (lang()==='en' ? ` ($${fmt(coins*price)} USDT)` : ` ($${fmt(coins*price)} USDT)`);
          el.textContent = txt + ' ' + suffix;
        });
        annotateSummary(price);
      }

      try {
        fetch(API).then(r=>r.json()).then(d=>{
          const p = parseFloat(d && (d.price||d.lastPrice));
          annotate(p);
          try { if (window.updatePhaseTotalsWithPrice) window.updatePhaseTotalsWithPrice(p); } catch(e) {}
        }).catch(()=>{});
      } catch(_) {}
    })();
  </script>

  <script src="scripts/analytics.js" defer></script>
</body>
</html>
